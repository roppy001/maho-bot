# maho-bot
プリコネR クランバトル用bot

# このBOTでできるようになること
## 実現優先度高め
 * クランメンバの凸状況が把握できるようになる
 * クランメンバがどの周のどのボスに凸をしたいかが把握できるようになる
 * 現在の各予約でのダメージが把握でき、ボスの討伐に人数が足りてるかどうかが把握できるようになる
 * 7月以降のクラバトの仕様に対応する
   * 全ボスの残りダメージが管理できること
   * メンバのステータスは1凸目(未／持越／済)、2凸目(未／持越／済)、3凸目(未／持越／済)の組み合わせで表現する
   * 各予約が、どの凸のどの本凸／持越なのかを管理できる
   * これまでは「どの周の何ボス目か」が進行状況を表していたが、今後は「どの周か」のみになる
 * 全ボス撃破したときに、次の周の予約をしている人に対してメンションでお知らせしてくれる
 * クランメンバ合計の凸状況が把握できるようになる
 * 誤ったコマンドを打った時に、別のメンバで修正ができる
## 実現優先度低め
 * クランメンバ合計の凸状況と5時までの時間を計測し、今のペースが速いのか遅いのかが把握できるようになる
 * 凸宣言後40分経過するとメンションで知らせてくれる
## 実現予定なし
 * 凸中かどうかのステータス管理
   * 凸コマンドは不要
 * 同時凸／ダメコン時のダメージ状況管理
   * チャットで直接やり取りすればOKなので不要

# コマンド

## 全コマンド共通
 * []で囲まれたものは省略可能
 * 末尾にメンションを付けると代行入力が可能。複数のメンションが付けられた場合は入力エラーとなる。
 * コマンドの間は1個以上の全角スペースもしくは半角スペースで空ける
 * 数字に数字以外のもの、入力できる範囲外の数字を入力した場合は入力エラーとなる
 * 全角数字は許容する

## クラメン用標準コマンド

### 予約コマンド
#### コマンドの使い方
~~~
.reserve 周 ボス番号 何凸目か 予定ダメージ(万単位) [コメント]
.予約 周 ボス番号 何凸目か 予定ダメージ(万単位) [コメント]
~~~

#### コマンド入力例
~~~
.reserve 23 3 1 2000
.予約 32 1 2 3200 ニャルワンパン予定
.reserve 0 5 3 2000 20時以降凸予定
~~~

#### コマンド打った時の動き
 * コマンドで指定された周、ボスに予約を入れる。予約リストに表示がされるようになる
 * 指定された凸の予約が入る。
   * 1凸目を予約してないのに2凸目3凸目の予約をした場合、2凸目を予約してないのに3凸目の予約をした場合は入力エラーになる
   * 1凸目を予約済みで、予約済みのボスに1凸目の予約をした場合、既存の情報の上書きになる
   * 1凸目を予約済みで、1凸目の持ち越しを予約済みでなくて、予約済みのボス以外に1凸目の予約をした場合、1凸目の持ち越しの予約となる
   * 1凸目を予約済みで、1凸目の持ち越しを予約済みで、予約済みのボス以外に1凸目の予約をした場合、入力エラーとなる
   * 上記は2凸目以降も同等となる
 * 周が0の場合は、周未指定の予約として予約リストに表示がされる
 * コマンドに指定されたダメージをもとに、敵の残りHPが計算され、予約リストに表示される
 * コマンド実行時に、登録時刻が記録される。予約リストは、登録時刻順に表示がされる。上書きの場合は登録時刻は更新されない。
 * すでに討伐済みの周の予約がされた場合は、エラーとなる

### 凸完了コマンド

#### コマンドの使い方
~~~
.fin ボス番号 何凸目か 実績ダメージ(万単位)
.完了 ボス番号 何凸目か 実績ダメージ(万単位)
~~~

#### コマンド入力例
~~~
.fin 3 1 2000
.完了 1 2 3200
~~~

#### コマンド打った時の動き
 * コマンドで指定された周、ボスの実績ダメージを入れる。予約リストに実績として表示がされるようになる。
 * 指定された凸の実績が入る。
   * 1凸目の実績がないのに2凸目3凸目の実績登録をした場合、2凸目の実績登録がないのに実績登録をした場合、エラーとなる
   * 1凸目を予約済みで、予約済みのボスに1凸目の予約をした場合、既存の情報の上書きになる
   * 1凸目を予約済みで、1凸目の持ち越しを予約済みでなくて、予約済みのボス以外に1凸目の予約をした場合、1凸目の持ち越しの予約となる
   * 1凸目を予約済みで、1凸目の持ち越しを予約済みで、予約済みのボス以外に1凸目の予約をした場合、入力エラーとなる
   * 上記は2凸目以降も同等となる
 * 周が0の場合は、周未指定の予約として予約リストに表示がされる
 * コマンドに指定されたダメージをもとに、敵の残りHPが計算され、予約リストに表示される
 * コマンド実行時に、登録時刻が記録される。予約リストは、登録時刻順に表示がされる。上書きの場合は登録時刻は更新されない。
 * すでに討伐済みの周の予約がされた場合は、エラーとなる

### キャンセルコマンド

#### コマンドの使い方
~~~
.cancel 周 ボス番号 何凸目か
.取消  周 ボス番号 何凸目か
~~~




